# 箱线图 (Box Plot)

## 📊 图表简介

箱线图（又称**盒须图**）是用**五个统计量**（最小值、Q1、中位数、Q3、最大值）来概括数据分布的图表，能快速展示数据的中心位置、离散程度和异常值。

## 🎯 适用场景

| 场景 | 说明 |
|------|------|
| **分布摘要** | 快速了解数据的集中趋势和离散程度 |
| **多组比较** | 比较多个组别的数据分布 |
| **异常值识别** | 直观发现离群点 |
| **对称性判断** | 判断数据分布的偏度 |
| **样本比较** | 比较不同实验条件下的结果 |

## 📈 图表分类

### 1. 基础箱线图
- 展示五数概括 + 异常值
- 最常见的形式

### 2. 带缺口箱线图
- 箱体中间有缺口
- 缺口表示中位数的置信区间

### 3. 分组箱线图
- 按多个因素分组
- 比较不同组合的分布

### 4. 带数据点的箱线图
- 叠加原始数据点
- 展示数据密度

### 5. 水平箱线图
- 横向展示
- 适合类别名称较长的情况

## ⚖️ 与相似图表的对比

| 对比图表 | 箱线图优势 | 箱线图劣势 |
|----------|-----------|-----------|
| **小提琴图** | 简洁，快速识别统计量 | 不显示分布形态 |
| **直方图** | 多组比较更紧凑 | 不显示详细分布 |
| **散点图** | 不受数据量影响 | 不显示每个数据点 |
| **误差条图** | 显示四分位数和异常值 | 仅显示均值和标准差 |

## 🔄 箱线图的统计含义

```
       ┌───────────────────────────────┐
       │           最大值(上须)         │ ← 不超过 Q3 + 1.5×IQR
       │               │               │
       ├───────────────┼───────────────┤ ← Q3 (第三四分位数, 75%)
       │               │               │
       │     ┌─────────┼─────────┐     │
       │     │         │         │     │ ← 箱体 (IQR = Q3 - Q1)
       │     ├─────────┴─────────┤     │ ← 中位数 (Q2, 50%)
       │     │                   │     │
       │     └───────────────────┘     │
       │               │               │ ← Q1 (第一四分位数, 25%)
       ├───────────────┼───────────────┤
       │               │               │ ← 最小值(下须)
       │             ○ ○               │ ← 异常值
       └───────────────────────────────┘
```

### 异常值判定
- **轻度异常值**：超出 1.5×IQR
- **极端异常值**：超出 3×IQR

## 🤔 如何选择

```
需要展示什么？
├── 统计摘要 → 箱线图
├── 详细分布 → 直方图或小提琴图
├── 统计+分布 → 小提琴图或箱线图+数据点
└── 趋势变化 → 折线图

对比组数？
├── 单组 → 直方图可能更直观
├── 2-10组 → 并列箱线图
├── 多因素 → 分组箱线图
└── >10组 → 考虑其他展示方式

数据特征？
├── 可能有异常值 → 箱线图（能识别异常值）
├── 可能有多峰 → 小提琴图（能识别多峰）
└── 需要显示每个数据点 → 蜂群图或抖动散点图
```

## 💡 使用建议

1. **样本量要求**：至少20个数据点才能得到有意义的箱线图
2. **添加数据点**：叠加抖动散点展示数据密度
3. **颜色编码**：不同组使用不同颜色
4. **异常值处理**：
   - 默认显示异常值
   - 可选择不同的异常值标准
5. **排序方式**：
   - 按中位数排序
   - 按自然顺序（时间、等级）
6. **添加均值**：可叠加均值点（通常用菱形标记）
7. **标注数值**：在图旁或图上标注关键统计量

## 📐 解读要点

| 图形特征 | 含义 |
|----------|------|
| 箱体短 | 数据集中，离散程度小 |
| 箱体长 | 数据分散，离散程度大 |
| 中位线偏上 | 左偏分布（负偏） |
| 中位线偏下 | 右偏分布（正偏） |
| 上/下须长 | 该方向有较长尾部 |
| 多个异常点 | 存在极端值或数据分布有长尾 |

## ⚠️ 局限性

1. **隐藏分布形态**：无法发现双峰或多峰分布
2. **样本量不可见**：不同组的样本量差异不明显
3. **细节丢失**：仅显示5个统计量，其他信息丢失
4. **不适合小样本**：样本太小时统计量不稳定

## 📊 与其他图表组合

| 组合方式 | 优点 |
|----------|------|
| 箱线图 + 抖动散点 | 展示统计量和原始数据 |
| 箱线图 + 均值标记 | 同时显示中位数和均值 |
| 小提琴图 + 箱线图 | 展示分布形态和统计量 |
| 分面箱线图 | 多因素的复杂对比 |
