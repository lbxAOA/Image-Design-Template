# 和弦图 (Chord Diagram)

## 🚀 快速开始

### 安装步骤

1. **确保文件已下载**：`chordChart.m` 和 `biChordChart.m` 应该在当前文件夹中

2. **添加到 MATLAB 路径**（选择以下方法之一）：

   **方法一：在 MATLAB 命令窗口运行**
   ```matlab
   % 添加当前文件夹到路径
   addpath('e:\GitHub\MCM\solve\_3_Draw_Matlab\16-和弦图');
   savepath;  % 保存路径，下次启动自动加载
   ```

   **方法二：在 MATLAB 界面操作**
   - 在"当前文件夹"窗口中，右键点击 `16-和弦图` 文件夹
   - 选择"添加到路径" → "选定的文件夹和子文件夹"

3. **运行示例代码**
   ```matlab
   cd('e:\GitHub\MCM\solve\_3_Draw_Matlab\16-和弦图');
   plot_Chordv1  % 直接运行脚本
   ```

### 验证安装
```matlab
% 检查是否可以识别 chordChart 函数
which chordChart
```
如果返回文件路径，说明安装成功！

---

## 📊 图表简介

和弦图是用**圆形布局**展示实体之间**相互关系**的图表，实体排列在圆周上，实体间的连接用内部的弧线（和弦）表示，弧线宽度代表关系强度。

## 🎯 适用场景

| 场景 | 说明 |
|------|------|
| **双向流动** | 国家间贸易、人口迁移 |
| **相互关系** | 基因互作、化学反应 |
| **协作网络** | 团队/部门间的协作关系 |
| **对称矩阵** | 相关性矩阵、相似度矩阵 |
| **循环流动** | 资源在多个节点间的循环 |

## 📈 图表分类

### 1. 基础和弦图
- 对称关系，双向连接
- 弧线宽度代表关系强度

### 2. 定向和弦图
- 有方向的关系（从A到B）
- 弧线两端宽度可能不同

### 3. 分组和弦图
- 节点按组划分
- 组内和组间关系用不同颜色区分

### 4. 层次和弦图
- 节点有层次结构
- 展示层级内和层级间的关系

## ⚖️ 与相似图表的对比

| 对比图表 | 和弦图优势 | 和弦图劣势 |
|----------|-----------|-----------|
| **桑基图** | 展示循环/对称关系 | 不适合单向流动 |
| **网络图** | 关系强度更直观 | 不适合复杂网络拓扑 |
| **热力图** | 视觉效果更好 | 精确数值读取困难 |
| **弧线图** | 紧凑，利用空间高效 | 节点多时容易混乱 |

## 🔄 和弦图 vs 桑基图

### 关键区别

| 特征 | 和弦图 | 桑基图 |
|------|--------|--------|
| **布局** | 圆形 | 线性 |
| **关系类型** | 双向/循环 | 单向/层次 |
| **适用数据** | 对称矩阵 | 流量数据 |
| **节点重复** | 每个节点出现一次 | 节点可在多层出现 |

### 选择指南
```
关系是否对称/循环？
├── 是 → 和弦图
└── 否 → 桑基图

数据是矩阵形式？
├── 对称矩阵 → 和弦图
└── 流量矩阵 → 桑基图
```

## 🤔 如何选择

```
数据类型？
├── 实体间相互关系 → 和弦图
├── 系统中的流动 → 桑基图
├── 网络拓扑结构 → 网络图
└── 矩阵数值展示 → 热力图

关系特征？
├── 双向/对称 → 和弦图
├── 单向/层次 → 桑基图
└── 复杂网络 → 网络图

节点数量？
├── ≤15个 → 和弦图
├── 15-30个 → 需简化或分组
└── >30个 → 考虑其他图表
```

## 💡 使用建议

1. **节点数量**：建议不超过15个，否则难以阅读
2. **节点排序**：
   - 按关系强度排序
   - 按分组排序
   - 按固定顺序（如地理位置）
3. **颜色策略**：
   - 按源节点着色
   - 按目标节点着色
   - 使用渐变色
4. **弧线透明度**：使用透明度处理交叉
5. **外圈弧线**：展示每个节点的总流量
6. **交互功能**：鼠标悬停高亮相关连接
7. **添加标签**：在圆周外标注节点名称

## 📐 解读要点

| 图形特征 | 含义 |
|----------|------|
| 外圈弧线长度 | 该节点的总关系强度 |
| 和弦宽度 | 两节点间的关系强度 |
| 和弦颜色 | 关系的来源或类型 |
| 大量和弦集中 | 该节点是关系中心 |
| 对称的和弦 | 双向关系平衡 |

## ⚠️ 注意事项

1. **节点过多**：超过15个节点时图表变得混乱
2. **交叉问题**：和弦交叉过多影响可读性
3. **数据准备**：需要整理成矩阵形式
4. **方向性**：注意区分有向和无向关系
5. **自连接**：考虑是否需要展示自身到自身的关系

## 🎯 典型应用

### 贸易流向
```
国家间的进出口贸易：
- 节点：国家
- 和弦：贸易额
- 宽度：贸易量大小
```

### 基因互作
```
基因间的相互作用：
- 节点：基因
- 和弦：互作关系
- 颜色：互作类型
```

### 团队协作
```
部门间的协作：
- 节点：部门
- 和弦：协作项目数
- 宽度：协作深度
```
