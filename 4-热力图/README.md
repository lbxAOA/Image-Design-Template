# 热力图 (Heatmap)

## 📊 图表简介

热力图是用**颜色深浅**来表示矩阵数据中数值大小的图表，通过色彩的渐变直观展示数据的分布模式和强度变化。

## 🎯 适用场景

| 场景                     | 说明                         |
| ------------------------ | ---------------------------- |
| **相关性矩阵**     | 展示多个变量之间的相关系数   |
| **时间×类别分析** | 如每周每小时的流量分布       |
| **地理数据**       | 区域数据密度展示             |
| **混淆矩阵**       | 分类模型的预测结果可视化     |
| **用户行为**       | 网站点击热点、用户活跃度分布 |

## 📈 图表分类

### 1. 基础热力图

- 矩阵形式的数值展示
- 每个单元格用颜色表示数值

### 2. 聚类热力图

- 对行和/或列进行层次聚类
- 重新排序使相似项聚集在一起

### 3. 带注释的热力图

- 在单元格中显示具体数值
- 颜色+数字双重信息

### 4. 分块热力图

- 将大矩阵分成若干区块
- 适合展示结构化数据

### 5. 日历热力图

- 按日历格式排列
- 适合展示日期相关数据（如GitHub贡献图）

## ⚖️ 与相似图表的对比

| 对比图表           | 热力图优势         | 热力图劣势           |
| ------------------ | ------------------ | -------------------- |
| **柱状图**   | 可同时展示大量数据 | 精确数值读取不便     |
| **散点图**   | 展示矩阵数据结构   | 不适合展示两变量关系 |
| **等高线图** | 离散数据展示更清晰 | 不适合连续空间数据   |

## 🔄 热力图的组合与增强

### 与聚类树状图结合

- 展示聚类结果与原始数据
- 帮助理解数据结构

### 与统计量结合

- 添加行/列的汇总统计
- 提供整体参考信息

### 与注释结合

- 标注关键数值或显著性
- 突出重点信息

## 🤔 如何选择

```
数据类型？
├── 相关性/距离矩阵 → 对称热力图 + 聚类
├── 时间×类别数据 → 日历热力图或标准热力图
├── 分类结果 → 混淆矩阵热力图
└── 表格数据 → 带注释的热力图

矩阵大小？
├── 小（<20×20）→ 带数值注释
├── 中（20-100×100）→ 仅颜色展示
└── 大（>100×100）→ 考虑聚类或分块
```

## 💡 使用建议

1. **颜色选择**：
   - 单一渐变色：适合单向数据（如频率）
   - 双向渐变色（发散色板）：适合有中心点的数据（如相关系数）
2. **颜色条**：必须添加颜色条说明颜色对应的数值范围
3. **数值标注**：矩阵较小时可直接显示数值
4. **行列排序**：
   - 按聚类结果排序：发现数据模式
   - 按数值大小排序：突出极值
5. **色彩标准化**：根据数据范围调整颜色映射
6. **缺失值处理**：用特殊颜色（如白色或灰色）标记

## 🎨 常用颜色方案

| 颜色方案           | 适用场景                       |
| ------------------ | ------------------------------ |
| `parula`         | 通用，默认推荐                 |
| `jet`            | 科学可视化（注意可能有误导性） |
| `hot`            | 强调高值区域                   |
| `cool`           | 强调低值区域                   |
| `RdBu`（红白蓝） | 相关系数、发散数据             |
| `Viridis`        | 对色盲友好                     |
