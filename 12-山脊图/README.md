# 山脊图 (Ridge Plot / Joy Plot)

## 📊 图表简介

山脊图（又称**喜悦图**）是将多个**密度曲线**垂直堆叠并部分重叠的图表，形似连绵起伏的山脊，适合比较多组数据的分布形态变化。

## 🎯 适用场景

| 场景 | 说明 |
|------|------|
| **时间序列分布** | 同一指标在不同时间点的分布变化 |
| **多组分布对比** | 多个组别/类别的分布形态比较 |
| **趋势+分布** | 同时展示趋势变化和分布形态 |
| **周期性分析** | 周/月/季度数据的分布变化 |
| **音频/信号** | 音频波形、信号强度的时间变化 |

## 📈 图表分类

### 1. 基础山脊图
- 多条密度曲线垂直堆叠
- 相邻曲线部分重叠

### 2. 填充山脊图
- 密度曲线下方填充颜色
- 增强视觉效果

### 3. 渐变色山脊图
- 不同组使用渐变色
- 强调顺序或变化

### 4. 双向山脊图
- 曲线左右对称展示
- 类似小提琴图的效果

## ⚖️ 与相似图表的对比

| 对比图表 | 山脊图优势 | 山脊图劣势 |
|----------|-----------|-----------|
| **小提琴图** | 更适合展示时间序列的分布变化 | 空间占用更大 |
| **箱线图** | 展示完整分布形态 | 无法快速获取统计量 |
| **直方图** | 多组对比更直观 | 单组数据信息密度低 |
| **密度图** | 减少重叠，对比更清晰 | 组数少时信息冗余 |

## 🔄 山脊图 vs 其他分布图

### 与小提琴图对比
```
小提琴图：
- 每组独立展示
- 适合2-8组对比
- 包含统计量

山脊图：
- 堆叠展示，节省空间
- 适合5-20+组
- 强调形态变化
```

### 与分面直方图对比
```
分面直方图：
- 每组单独面板
- 便于精确对比
- 占用空间大

山脊图：
- 堆叠在一起
- 强调整体趋势
- 紧凑展示
```

## 🤔 如何选择

```
组数多少？
├── 2-5组 → 小提琴图或重叠密度图
├── 5-15组 → 山脊图
└── >15组 → 山脊图（需调整重叠度）

关注点？
├── 精确统计量 → 箱线图
├── 分布形态对比 → 山脊图或小提琴图
├── 单组详细分布 → 直方图
└── 趋势+分布 → 山脊图

数据有顺序吗？
├── 有（时间、等级）→ 山脊图
└── 无（独立类别）→ 小提琴图或箱线图
```

## 💡 使用建议

1. **重叠度控制**：
   - 太少：浪费空间
   - 太多：信息遮挡
   - 建议：0.5-0.8的重叠度
2. **绘制顺序**：从后往前绘制，确保正确遮挡
3. **颜色渐变**：使用渐变色强调顺序关系
4. **Y轴标签**：清晰标注每组的名称
5. **统一比例**：所有曲线使用相同的密度比例
6. **基线处理**：每条曲线的基线应清晰可见
7. **数据预处理**：考虑对数据进行平滑处理

## 📐 解读要点

| 图形特征 | 含义 |
|----------|------|
| 峰值位置变化 | 中心趋势在移动 |
| 峰值宽度变化 | 离散程度在变化 |
| 单峰→双峰 | 分布形态发生变化 |
| 对称→偏斜 | 偏度发生变化 |
| 整体形态相似 | 分布基本稳定 |

## ⚠️ 注意事项

1. **组数下限**：少于5组时，山脊图优势不明显
2. **数据量要求**：每组至少30+个数据点
3. **异常值处理**：极端值可能影响密度估计
4. **带宽选择**：核密度估计的带宽影响平滑程度
5. **重叠造成信息丢失**：被遮挡部分无法准确读取

## 🎨 视觉效果

### 经典案例
山脊图因《Unknown Pleasures》专辑封面而闻名（Joy Division乐队），该封面展示了脉冲星的无线电信号波形，也因此得名"喜悦图"。

### 色彩方案建议
| 数据类型 | 推荐配色 |
|----------|----------|
| 时间序列 | 冷色→暖色渐变 |
| 有序类别 | 同色系渐变 |
| 无序类别 | 对比色 |
