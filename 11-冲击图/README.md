# 冲击图 (Alluvial Diagram)

## 📊 图表简介

冲击图（又称**河流图**、**冲积图**）是展示**分类数据在多个时间点或条件下的变化**的图表，通过流动的"河流"状图形追踪每个类别的状态转换。

## 🎯 适用场景

| 场景 | 说明 |
|------|------|
| **状态转换** | 用户/对象在不同阶段的状态变化 |
| **分类演变** | 分类随时间的变化（如选民党派变化） |
| **流程追踪** | 追踪个体在流程中的路径 |
| **队列分析** | 不同群体随时间的流动 |
| **聚类变化** | 聚类结果在不同参数下的变化 |

## 📈 图表分类

### 1. 基础冲击图
- 两个时间点/阶段的状态转换
- 最简单的形式

### 2. 多阶段冲击图
- 展示多个时间点的连续变化
- 完整追踪演变过程

### 3. 加权冲击图
- 流带宽度代表数量
- 同时展示数量和流向

### 4. 分组冲击图
- 节点按组着色
- 展示组内和组间的流动

## ⚖️ 与相似图表的对比

| 对比图表 | 冲击图优势 | 冲击图劣势 |
|----------|-----------|-----------|
| **桑基图** | 追踪个体/群体的状态转换 | 不适合强调流量大小 |
| **平行坐标图** | 分类数据展示更清晰 | 不适合连续变量 |
| **堆叠面积图** | 展示类别间的流动 | 不展示总量的时间变化 |

## 🔄 冲击图 vs 桑基图

### 关键区别

| 特征 | 冲击图 | 桑基图 |
|------|--------|--------|
| **关注点** | 状态转换/演变 | 流量传递/分配 |
| **时间维度** | 通常有时间序列 | 通常是某时刻的快照 |
| **节点含义** | 类别/状态 | 系统中的实体 |
| **流量守恒** | 个体数量守恒 | 能量/物质守恒 |

### 选择指南
```
问"谁变成了什么？" → 冲击图
问"多少从A流向B？" → 桑基图
```

## 🤔 如何选择

```
数据特征？
├── 个体有多个时间点的状态 → 冲击图
├── 系统中的流量分配 → 桑基图
├── 循环/对称关系 → 和弦图
└── 网络连接关系 → 网络图

时间点数量？
├── 2个 → 基础冲击图
├── 3-5个 → 多阶段冲击图
└── >5个 → 考虑简化或分段展示

类别数量？
├── ≤6个 → 标准冲击图
├── 7-10个 → 使用颜色分组
└── >10个 → 考虑合并小类别
```

## 💡 使用建议

1. **阶段标签**：每列顶部清晰标注阶段/时间点名称
2. **颜色策略**：
   - 按起始状态着色：追踪来源
   - 按终止状态着色：关注去向
   - 按流向着色：强调转换类型
3. **流带排序**：按大小排序，大的在上
4. **节点高度**：与该类别的数量成正比
5. **添加数值**：在节点旁标注具体数量
6. **避免过度复杂**：类别过多时合并小类别
7. **突出重点**：用颜色或动画强调关键路径

## 📐 解读要点

| 图形特征 | 含义 |
|----------|------|
| 流带直接连接 | 状态保持不变 |
| 流带交叉 | 发生状态转换 |
| 流带变窄 | 该类别人数减少 |
| 流带变宽 | 该类别人数增加 |
| 流带颜色变化 | 从一个状态转换到另一个状态 |

## ⚠️ 注意事项

1. **类别数量**：过多类别会使图表难以阅读
2. **阶段数量**：3-5个阶段最为清晰
3. **交叉最小化**：通过排序减少流带交叉
4. **颜色一致性**：同一类别在不同阶段保持颜色一致
5. **比例一致**：确保流带宽度与数量成正比

## 🎯 典型应用

### 用户行为追踪
```
阶段1（来源）→ 阶段2（行为）→ 阶段3（结果）
 搜索引擎        浏览首页        购买
 社交媒体        查看商品        加入购物车
 直接访问        使用搜索        离开
```

### 选举分析
```
2020年投票 → 2022年投票 → 2024年投票
  民主党        民主党         民主党
  共和党        共和党         共和党
  中立          中立           中立
```
