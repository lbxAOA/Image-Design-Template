# 小提琴图 (Violin Plot)

## 📊 图表简介

小提琴图是将**箱线图**和**核密度估计图**结合的图表，既展示数据的统计摘要（中位数、四分位数），又展示数据的分布形态，形状类似小提琴。

## 🎯 适用场景

| 场景 | 说明 |
|------|------|
| **分布比较** | 比较多组数据的分布形态差异 |
| **双峰检测** | 发现数据中的多峰分布 |
| **统计+分布** | 同时需要箱线图的统计量和分布形态 |
| **组间对比** | 不同实验组、不同条件下的数据对比 |
| **数据探索** | 初步了解数据的分布特征 |

## 📈 图表分类

### 1. 基础小提琴图
- 对称的密度曲线 + 内嵌箱线图
- 最常见的形式

### 2. 分割小提琴图
- 左右两侧展示不同组的分布
- 适合两组数据的对比

### 3. 带数据点的小提琴图
- 在小提琴图上叠加散点
- 展示原始数据的分布

### 4. 分组小提琴图
- 按类别分组排列
- 多因素对比分析

### 5. 水平小提琴图
- 横向展示
- 类别名称较长时使用

## ⚖️ 与相似图表的对比

| 对比图表 | 小提琴图优势 | 小提琴图劣势 |
|----------|-----------|-----------|
| **箱线图** | 展示完整分布形态，发现多峰 | 视觉解读门槛较高 |
| **直方图** | 更平滑，多组比较更直观 | 单组数据直方图更直接 |
| **密度图** | 同时展示统计量（中位数等） | 占用空间更大 |
| **抖动散点图** | 展示分布形态且不丢失细节 | 数据量大时效果更好 |

## 🔄 小提琴图 vs 箱线图

### 箱线图的局限
```
箱线图隐藏的信息：
- 无法发现双峰分布
- 无法看出分布的对称性
- 样本量大小不可见
```

### 小提琴图的补充
```
小提琴图额外展示：
- 完整的分布形态
- 多峰分布一目了然
- 分布的偏度和峰度
```

## 🤔 如何选择

```
需要展示什么？
├── 仅统计摘要 → 箱线图
├── 仅分布形态 → 密度图或直方图
├── 统计+分布 → 小提琴图
└── 原始数据点 → 散点图或蜂群图

对比组数？
├── 2-3组 → 分割小提琴图
├── 4-8组 → 并列小提琴图
└── >8组 → 考虑分面展示

数据特征？
├── 可能存在多峰 → 小提琴图
├── 单峰对称 → 箱线图可能足够
└── 需要看每个点 → 蜂群图或带点小提琴图
```

## 💡 使用建议

1. **带宽选择**：影响密度估计的平滑程度，需适当调整
2. **内部展示**：可选择内嵌箱线图、四分位数线或数据点
3. **宽度归一化**：
   - 等宽：便于比较形态
   - 按样本量：反映数据量差异
4. **颜色区分**：不同组使用不同颜色
5. **截断处理**：决定是否在数据范围外截断密度曲线
6. **添加统计量**：可标注均值、中位数等关键值
7. **配合点图**：叠加抖动散点展示原始数据

## 📐 解读要点

| 图形特征 | 含义 |
|----------|------|
| 宽的部分 | 数据集中的区域 |
| 窄的部分 | 数据稀疏的区域 |
| 对称形状 | 数据分布对称 |
| 偏向一侧 | 数据分布有偏 |
| 两处凸起 | 双峰分布 |
| 长尾 | 存在极端值或偏态分布 |

## ⚠️ 注意事项

1. **样本量要求**：至少需要30+个数据点才能得到有意义的密度估计
2. **边界效应**：数据边界处的密度估计可能不准确
3. **解读门槛**：比箱线图复杂，需向读者解释图表含义
4. **多峰判断**：密度曲线的小波动不一定是真正的多峰
